---
import { t, type Lang } from '../i18n/index';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
---

<div
  id="cookie-banner"
  class="fixed bottom-0 inset-x-0 z-50 hidden"
  role="dialog"
  aria-label="Cookie consent"
>
  <div style="background: rgba(19, 49, 51, 0.9); padding: 20px 30px;">
    <div class="max-w-[1528px] mx-auto flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-white text-sm" style="line-height: 1.5; max-width: 700px;">
        {t(lang, 'cookie.message')}
      </p>
      <div class="flex gap-3 flex-shrink-0">
        <button
          id="cookie-decline"
          class="cookie-btn cookie-btn-secondary"
        >
          {t(lang, 'cookie.decline')}
        </button>
        <button
          id="cookie-accept"
          class="cookie-btn cookie-btn-primary"
        >
          {t(lang, 'cookie.accept')}
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  .cookie-btn {
    padding: 10px 24px;
    font-size: 14px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s;
    white-space: nowrap;
  }
  .cookie-btn-primary {
    background: #FFD4A6;
    color: #133133;
  }
  .cookie-btn-primary:hover {
    background: #ccaa85;
  }
  .cookie-btn-secondary {
    background: transparent;
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
  .cookie-btn-secondary:hover {
    border-color: white;
  }
</style>

<script>
  const banner = document.getElementById('cookie-banner');
  if (!localStorage.getItem('cookie-consent')) {
    banner?.classList.remove('hidden');
  }
  document.getElementById('cookie-accept')?.addEventListener('click', () => {
    localStorage.setItem('cookie-consent', 'accepted');
    banner?.classList.add('hidden');
  });
  document.getElementById('cookie-decline')?.addEventListener('click', () => {
    localStorage.setItem('cookie-consent', 'declined');
    banner?.classList.add('hidden');
  });
</script>
