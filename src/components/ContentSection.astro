---
import type { ImageMetadata } from 'astro';

interface Props {
  reverse?: boolean;
  bgColor?: string;
  image?: ImageMetadata;
  imageAlt?: string;
  imageHeight?: string;
  imageRadius?: string;
  overflowImage?: boolean;
  class?: string;
}

const {
  reverse = false,
  bgColor,
  image,
  imageAlt = '',
  imageHeight = '662px',
  imageRadius = '30px',
  overflowImage = false,
  class: className = '',
} = Astro.props;
---

<section
  class:list={['content-section', { 'content-section-reverse': reverse }, className]}
  style={bgColor ? `background-color: ${bgColor};` : ''}
>
  <div class="content-section-inner">
    {image && (
      <div class="content-image-wrap">
        <img
          src={image.src}
          alt={imageAlt}
          width={image.width}
          height={image.height}
          loading="lazy"
          style={`width: 100%; height: ${imageHeight}; object-fit: cover; border-radius: ${overflowImage ? `0 ${imageRadius} ${imageRadius} 0` : imageRadius};`}
        />
      </div>
    )}
    <div class="content-text-wrap">
      <slot />
    </div>
  </div>
</section>

<style>
  .content-section {
    overflow: hidden;
  }
  .content-section-inner {
    max-width: 1528px;
    margin: 0 auto;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 32px;
    padding: 128px 20px;
  }
  .content-section-reverse .content-section-inner {
    flex-direction: row-reverse;
  }
  .content-image-wrap {
    flex: 1;
    min-width: 0;
  }
  .content-text-wrap {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 32px;
  }
  .content-text-wrap :global(h2) {
    font-size: clamp(26px, 4vw, 64px);
    font-weight: 600;
    line-height: 1.2em;
    color: #133133;
  }
  .content-text-wrap :global(p) {
    font-size: clamp(18px, 1.5vw, 24px);
    font-weight: 400;
    line-height: 1.5;
    color: #133133;
  }
  @media (max-width: 1024px) {
    .content-section-inner {
      flex-direction: column !important;
      padding: 64px 20px !important;
    }
    .content-section-reverse .content-section-inner {
      flex-direction: column-reverse !important;
    }
    .content-image-wrap :global(img) {
      height: 600px !important;
      border-radius: 30px !important;
    }
  }
  @media (max-width: 767px) {
    .content-section-inner {
      padding: 50px 20px !important;
    }
    .content-image-wrap :global(img) {
      height: 300px !important;
    }
  }
</style>
